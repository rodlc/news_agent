<%# app/views/chats/show.html.erb %>
<div class="container mt-4">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      
      <%# En-tÃªte du chat %>
      <div class="card shadow">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <div>
            <h3 class="mb-0"><%= @chat.name %></h3>
            <% if @chat.daily %>
              <small>ðŸ“° <%= @chat.daily.title %></small>
            <% end %>
          </div>
          <%= link_to "â† Retour", root_path, class: "btn btn-sm btn-light" %>
        </div>
        
        <%# Zone de messages %>
        <div class="card-body bg-light" style="height: 60vh; overflow-y: scroll;" id="messages-container">
          <% if @chat.messages.any? %>
            <%= render @chat.messages %>
          <% else %>
            <div class="text-center text-muted mt-5">
              <p>ðŸ’¬ Aucun message pour l'instant</p>
              <p>Pose ta premiÃ¨re question ci-dessous !</p>
            </div>
          <% end %>
        </div>
        
        <%# Formulaire d'envoi %>
        <div class="card-footer bg-white">
          <%= form_with model: [@chat, @message], local: true, class: "d-flex" do |f| %>
            <%= f.text_area :content, 
                class: "form-control me-2", 
                placeholder: "Demande un rÃ©sumÃ© de l'actualitÃ©...",
                rows: 2,
                required: true %>
            <%= f.submit "Envoyer", class: "btn btn-primary", style: "height: fit-content;" %>
          <% end %>
        </div>
      </div>
      
    </div>
  </div>
</div>
